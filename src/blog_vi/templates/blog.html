<!-- Base template of the blog page -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
          integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
          crossorigin="anonymous"/>
    <link href="https://fonts.googleapis.com/css?family=Nunito:400,700,800" rel="stylesheet">

    {% include 'favicon.html' %}

    <link rel="manifest" href="{{settings.blog_root_path}}site.webmanifest">
    <link rel="mask-icon" href="{{settings.blog_root_path}}safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="theme-color" content="#3b7977">

    <!-- Primary Meta Tags -->
    <title>{{ settings.landing_meta.title or settings.blog_name }}</title>
    <meta name="author" content="{{ settings.landing_meta.author }}">
    <meta name="title" content="{{ settings.landing_meta.title or settings.blog_name }}">
    <meta name="description" content="{{ settings.landing_meta.description }}">
    <meta name="keywords" content="{{ settings.landing_meta.keywords }}">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ settings.landing_meta.url }}">
    <meta property="og:title" content="{{ settings.landing_meta.title or settings.blog_name }}">
    <meta property="og:description"
          content="{{ settings.landing_meta.description }}">
    <meta property="og:image" content="{{ settings.landing_meta.image }}">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ settings.landing_meta.url }}">
    <meta property="twitter:title" content="{{ settings.landing_meta.title or settings.blog_name }}">
    <meta property="twitter:description"
          content="{{ settings.landing_meta.description }}">
    <meta property="twitter:image" content="{{ settings.landing_meta.image }}">

    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">

    {% if settings.google_tag_manager.enabled %}
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','{{ settings.google_tag_manager.google_tag_manager_projectid }}');</script>
<!-- End Google Tag Manager -->
  {% endif %}


</head>

<body class="bg-gray-100 font-sans leading-normal tracking-normal">


{% include 'header.html' %}
<!--Container-->
<div class="container px-4 md:px-0 max-w-6xl mx-auto mt-24">

    <div class="mx-0 sm:mx-6">

        <!--Nav-->
        <nav class="mt-0 w-full">
            <ul class="list-reset w-full flex flex-wrap flex-1 md:flex-none">
                <li class="mr-2">
                    <a class="rounded bg-green-500 text-white px-1 uppercase text-xs whitespace-nowrap md:text-sm"
                       href="{{ blog.blog_path }}">ALL</a>
                </li>
                {% for category in categories %}
                    <li class="mr-2">
                        <a class="rounded bg-green-500 text-white px-1 uppercase text-xs whitespace-nowrap md:text-sm"
                           href="{{ category.1 }}">{{ category.0 }}</a>
                    </li>
                {% endfor %}
            </ul>

            <div class="flex w-full justify-end content-center">
                <a
                        class="inline-block text-gray-500 no-underline hover:text-green-500 hover:text-underline text-center h-10 p-2 md:h-auto md:p-4 avatar"
                        data-tippy-content="@twitter_handle" href="https://twitter.com/intent/tweet?url=#"
                        id="twitter">
                    <svg class="fill-current h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
                        <path
                                d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path>
                    </svg>
                </a>
                <a
                        class="inline-block text-gray-500 no-underline hover:text-green-500 hover:text-underline text-center h-10 p-2 md:h-auto md:p-4 avatar"
                        data-tippy-content="#facebook_id" href="https://www.facebook.com/sharer/sharer.php?u=#}"
                        id="facebook">
                    <svg class="fill-current h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
                        <path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"></path>
                    </svg>
                </a>
            </div>
        </nav>

        <div class="w-full text-xl md:text-2xl text-gray-800 leading-normal rounded-t">

            <!--Lead Card-->
            {% include 'lead_card.html' %}
            <!--/Lead Card-->
            <!--      {{ searchConfig }}-->

            <!--Posts Container-->
            <div class="flex flex-wrap justify-between pt-12 -mx-6">
                {% for article in articles %}
                    <!--1/3 col -->
                    {% include 'card.html' %}
                {% endfor %}

            </div>

        </div>
        <!--/ Post Content-->

    </div>

    <!--Subscribe-->
    {% include 'subscription_form.html' %}
    <!-- /Subscribe-->

</div>


</div>


{% include 'footer.html' %}
<script src="https://unpkg.com/popper.js@1/dist/umd/popper.min.js"></script>
<script src="https://unpkg.com/tippy.js@4"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6"></script>
<script src="{{ settings.blog_root_path }}templates/assets/js/search.js"></script>

<script>    /* Progress bar */
//Source: https://alligator.io/js/progress-bar-javascript-css-variables/
var h = document.documentElement,
    b = document.body,
    st = 'scrollTop',
    sh = 'scrollHeight',
    progress = document.querySelector('#progress'),
    scroll;
var scrollpos = window.scrollY;
var header = document.getElementById("header");
var navcontent = document.getElementById("nav-content");

document.addEventListener('scroll', function () {

    /*Refresh scroll % width*/
    scroll = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
    progress.style.setProperty('--scroll', scroll + '%');

    /*Apply classes for slide in bar*/
    scrollpos = window.scrollY;

    if (scrollpos > 10) {
        header.classList.add("bg-white");
        header.classList.add("shadow");
        navcontent.classList.remove("bg-gray-100");
        navcontent.classList.add("bg-white");
    } else {
        header.classList.remove("bg-white");
        header.classList.remove("shadow");
        navcontent.classList.remove("bg-white");
        navcontent.classList.add("bg-gray-100");

    }

});


//Javascript to toggle the menu
document.getElementById('nav-toggle').onclick = function () {
    document.getElementById("nav-content").classList.toggle("hidden");
}
//Init tooltips
tippy('.avatar')
</script>
<!--<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js"></script>-->

<!--Search script-->
<script>
    const images = document.querySelectorAll("[data-src]");

    // change data-src to src
    function preloadImage(img) {
        const src = img.getAttribute("data-src");
        if (!src) {
            return;
        }
        img.src = src;
    }

    // load image
    const imgObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (!entry.isIntersecting) {

            } else {
                preloadImage(entry.target);
            }
        })
    });

    images.forEach(image => {
        imgObserver.observe(image);
    })

</script>

<script type="text/javascript">window["searchConfig"] = {{ searchConfig }}</script>
<script>
    /*
      Twitter
      https://twitter.com/share?url=[post-url]&text=[post-title]

      Facebook
      https://www.facebook.com/sharer.php?u=[post-url]

    */
    let twitterURI = document.getElementById('twitter');
    let facebookURI = document.getElementById('facebook');

    let postURI = encodeURI(document.location.href);
    let postTitle = encodeURI("Hi everyone you can share this post: ")

    facebookURI.setAttribute('href', `https://www.facebook.com/sharer.php?u=${postURI}`);
    twitterURI.setAttribute('href', `https://twitter.com/share?url=${postURI}&text=${postTitle}`);

</script>

<!--Sharect-->
{% if settings.sharect.enabled %}
    <script src="https://unpkg.com/sharect@2.0.0/dist/sharect.js"></script>
    <script>window["sharectConfig"] = {{ settings.sharect|tojson|safe }}</script>
    <script src="{{ settings.blog_root_path }}templates/assets/js/sharect.js"></script>
{% endif %}

{% if settings.google_tag_manager.enabled %}
      <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ settings.google_tag_manager.google_tag_manager_projectid }}"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  {% endif %}



</body>


</html>
